{
	"action": "get",
	"node": {
		"key": "/_tendrl/definitions/master",
		"value": "---\nnamespace.tendrl.node_agent:\n  _meta:\n    platforms:\n        # platform_type supported by tendrl. One of these platforms and their\n        # corresponding versions must be reused in any of the definition files.\n        centos:\n          # platform_version\n          # Supported versions, in ascending order of release. This list, being\n          # ordered, enables the comparators used later in the file to function.\n          - 6.x\n          - 7.x\n        ubuntu:\n          - 15.04.x\n          - 15.10.x\n          - 16.04.x\n    storage_system_types:\n        ceph: namespace.tendrl.ceph_integration\n        gluster: namespace.tendrl.gluster_integration\n  flows:\n    ImportCluster:\n      atoms:\n        - tendrl.node_agent.objects.Package.atoms.Install\n        - tendrl.node_agent.objects.SDS.atoms.GenerateConfig\n        - tendrl.node_agent.objects.File.atoms.Write\n        - tendrl.node_agent.objects.Node.atoms.Cmd\n      help: \"Import existing Gluster Cluster\"\n      enabled: true\n      inputs:\n        mandatory:\n          - \"Node[]\"\n          - DetectedCluster.sds_pkg_name\n          - DetectedCluster.sds_pkg_version\n          - TendrlContext.integration_id\n      post_run:\n        - tendrl.node_agent.objects.TendrlContext.atoms.CheckClusterIdExists\n      pre_run:\n        - tendrl.node_agent.objects.Node.atoms.CheckNodeUp\n        - tendrl.node_agent.objects.TendrlContext.atoms.Compare\n      run: tendrl.node_agent.flows.import_cluster.ImportCluster\n      type: Create\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4edef\n      version: 1\n\n  objects:\n    Definition:\n        enabled: True\n        help: \"Definition\"\n        value: _tendrl/definitions/master\n        list: _tendrl/definitions/master\n        attrs:\n            master:\n                help: master definitions\n                type: String\n    Config:\n        enabled: True\n        help: \"Config\"\n        value: _tendrl/config/node-agent/data\n        list: _tendrl/config/node-agent\n        attrs:\n            data:\n                help: config\n                type: String\n    DetectedCluster:\n      enabled: True\n      help: \"DetectedCluster\"\n      list: nodes/$Node_context.node_id/DetectedCluster\n      attrs:\n        detected_cluster_id:\n          help: \"Temporary id for the sds which is detected in Tendrl\"\n          type: String\n        sds_pkg_name:\n          help: Storage system package name\n          type: String\n        sds_pkg_version:\n          help: Storage system package version\n          type: String\n      value: nodes/$Node_context.node_id/DetectedCluster\n    Cpu:\n      attrs:\n        architecture:\n          type: String\n        cores_per_socket:\n          type: String\n        cpu_family:\n          type: String\n        cpu_op_mode:\n          type: String\n        model:\n          type: String\n        model_name:\n          type: String\n        vendor_id:\n          type: String\n      enabled: true\n      value: nodes/$Node_context.node_id/Cpu\n      help: \"CPU\"\n    Memory:\n      attrs:\n        total_size:\n          type: String\n        total_swap:\n          type: String\n      enabled: true\n      value: nodes/$Node_context.node_id/Memory\n      help: \"Node Memory\"\n    Service:\n      attrs:\n        running:\n          type: String\n        exists:\n          type: String\n        service:\n          type: String\n      enabled: true\n      list: nodes/$Node_context.node_id/Services\n      help: \"Service\"\n      value: nodes/$Node_context.node_id/Services\n    Disk:\n      attrs:\n        disk_id:\n          help: \"disk unique id\"\n          type: String\n        device_name:\n          help: \"disk name\"\n          type: String\n        disk_kernel_name:\n          help: \"disk internal kernel name\"\n          type: String\n        parent_id:\n          help: \"disk parent id\"\n          type: String\n        parent_name:\n          help: \"disk parent name\"\n          type: String\n        disk_type:\n          help: \"disk type\"\n          type: String\n        fsuuid:\n          help: \"file system uuid\"\n          type: String\n        mount_point:\n          help: \"disk mount point\"\n          type: String\n        Model:\n          help: \"disk model name\"\n          type: String\n        vendor:\n          help: \"disk vendor name\"\n          type: String\n        used:\n          help: \"disk used or not True/False\"\n          type: String\n        serial_no:\n          help: \"disk serial number\"\n          type: String\n        rmversion:\n          help: \"disk firmeware version\"\n          type: String\n        fstype:\n          help: \"file system type\"\n          type: String\n        ssd:\n          help: \"ssd is true / not\"\n          type: String\n        size:\n          help: \"size of the disk\"\n          type: Integer\n        device_number:\n          help: \"device number\"\n          type: String\n        driver:\n          help: \"driver\"\n          type: String\n        group:\n          help: \"disk group\"\n          type: String\n        device:\n          help: \"device\"\n          type: String\n        bios_id:\n          help: \"Bios id\"\n          type: String\n        state:\n          help: \"disk state\"\n          type: String\n        drive_status:\n          help: \"disk status\"\n          type: String\n        label:\n          help: \"label\"\n          type: String\n        req_queue_size:\n          help: \"request queue size\"\n          type: String\n        driver_modules:\n          help: \"driver modules\"\n          type: String\n        mode:\n          help: \"driver mode\"\n          type: String\n        owner:\n          help: \"driver owner\"\n          type: String\n        min_io_size:\n          help: \"min I/O size\"\n          type: String\n        major_to_minor_no:\n          help: \"major to minor number\"\n          type: String\n        device_files:\n          help: \"device files\"\n          type: String\n        sysfs_busid:\n          help: \"sysfs bus id\"\n          type: String\n        alignement:\n          help: \"alignement\"\n          type: String\n        read_only:\n          help: \"disk is read only or not\"\n          type: String\n        read_ahead:\n          help: \"read ahead\"\n          type: String\n        removable_device:\n          help: \"removable device or not\"\n          type: String\n        scheduler_name:\n          help: \"scheduler_name\"\n          type: String\n        sysfs_id:\n          help: \"sysfs id\"\n          type: String\n        sysfs_device_link:\n          help: \"sysfs device link\"\n          type: String\n        geo_bios_edd:\n          help: \"geometry bios edd\"\n          type: String\n        geo_bios_legacy:\n          help: \"geometry bios legacy\"\n          type: String\n        geo_logical:\n          help: \"geometry logical\"\n          type: String\n        phy_sector_size:\n          help: \"physical sector size\"\n          type: String\n        discard_granularity:\n          help: \"discard granularity\"\n          type: String\n        discard_align_offset:\n          help: \"discard align offset\"\n          type: String\n        discard_max_bytes:\n          help: \"discard max bytes\"\n          type: String\n        discard_zeroes_data:\n          help: \"discard zeroes data\"\n          type: String\n        optimal_io_size:\n          help: \"optimal I/O size\"\n          type: String\n        log_sector_size:\n          help: \"logical sector size\"\n          type: String\n\n      enabled: true\n      list: nodes/$Node_context.node_id/Disks\n      value: nodes/$Node_context.node_id/Disks\n      help: \"Disk\"\n    UsedDisk:\n      attrs:\n        disk_id:\n          help: \"File system UUID\"\n          type: String\n      enabled: true\n      list: nodes/$Node_context.node_id/Disks/used\n    FreeDisk:\n      attrs:\n        disk_id:\n          help: \"File system UUID\"\n          type: String\n      enabled: true\n      list: nodes/$Node_context.node_id/Disks/free\n    Node:\n      atoms:\n        cmd:\n          enabled: true\n          inputs:\n            mandatory:\n              - Node.cmd_str\n          name: \"Execute CMD on Node\"\n          help: \"Executes a command\"\n          run: tendrl.node_agent.atoms.node.cmd.Cmd\n          type: Create\n          uuid: dc8fff3a-34d9-4786-9282-55eff6abb6c3\n        check_node_up:\n          enabled: true\n          inputs:\n            mandatory:\n              - Node.fqdn\n          outputs:\n            - Node.status\n          name: \"check whether the node is up\"\n          help: \"Checks if a node is up\"\n          run: tendrl.node_agent.atoms.node.check_node_up\n          type: Create\n          uuid: eda0b13a-7362-48d5-b5ca-4b6d6533a5ab\n      attrs:\n        fqdn:\n          type: String\n        status:\n          type: Boolean\n      enabled: true\n      value: nodes/$Node_context.node_id/Node\n      help: \"Node\"\n    Os:\n      attrs:\n        kernel_version:\n          type: String\n        os:\n          type: String\n        os_version:\n          type: String\n        selinux_mode:\n          type: String\n      enabled: true\n      value: nodes/$Node_context.node_id/Os\n      help: \"OS\"\n    Package:\n      atoms:\n        install:\n          enabled: true\n          inputs:\n            mandatory:\n              - Package.name\n              - Package.pkg_type\n            optional:\n              - Package.version\n          name: \"Install Package\"\n          help: \"Checks if a package is installed\"\n          post_run:\n            - tendrl.node_agent.atoms.package.validations.check_package_installed\n          run: tendrl.node_agent.atoms.package.install.Install\n          type: Create\n          uuid: 16abcfd0-aca9-4022-aa0f-5de1c5a742c7\n      attrs:\n        name:\n          help: \"Location of the rpm/deb/pypi package\"\n          type: String\n        pkg_type:\n          help: \"Type of package can be rpm/deb/pip/\"\n        state:\n          help: \"State can installed|uninstalled\"\n        version:\n          help: \"Version of the rpm/deb/pypi package\"\n          type: String\n      enabled: true\n      help: \"package\"\n      value: \"\"\n    Process:\n      atoms:\n        start:\n          enabled: true\n          inputs:\n            mandatory:\n              - Service.config_path\n              - Service.config_data\n          name: \"Configure Service\"\n          help: \"Checks if a service is running\"\n          post_run:\n            - tendrl.node_agent.atoms.service.validations.check_service_running\n          run: tendrl.node_agent.atoms.service.configure.Configure\n          type: Update\n          uuid: b90a0d97-8c9f-4ab1-8f64-dbb5638159a3\n      attrs:\n        name:\n          help: \"Name of the service\"\n          type: String\n        state:\n          help: \"Service state can be started|stopped|restarted|reloaded\"\n          type: String\n      enabled: true\n    TendrlContext:\n      enabled: True\n      attrs:\n        integration_id:\n          help: \"Tendrl managed/generated cluster id for the sds being managed by Tendrl\"\n          type: String\n        sds_name:\n          help: \"Name of the Tendrl managed sds, eg: 'gluster'\"\n          type: String\n        sds_version:\n          help: \"Version of the Tendrl managed sds, eg: '3.2.1'\"\n          type: String\n        node_id:\n          help: \"Tendrl ID for the managed node\"\n          type: String\n      value: nodes/$Node_context.node_id/TendrlContext\n      help: \"Tendrl context\"\n    NodeContext:\n      attrs:\n        machine_id:\n          help: \"Unique /etc/machine-id\"\n          type: String\n        fqdn:\n          help: \"FQDN of the Tendrl managed node\"\n          type: String\n        node_id:\n          help: \"Tendrl ID for the managed node\"\n          type: String\n        tags:\n          help: \"The tags associated with this node\"\n          type: String\n        status:\n          help: \"Node status\"\n          type: String\n\n      enabled: true\n      list: nodes/$Node_context.node_id/Node_context\n      value: nodes/$Node_context.node_id/Node_context\n      help: Node Context\n    File:\n      atoms:\n        write:\n          enabled: true\n          inputs:\n            mandatory:\n              - Config.data\n              - Config.file_path\n          name: \"Write configuration data\"\n          help: \"Writes the configuration data\"\n          run: tendrl.node_agent.objects.File.atoms.write.Write\n          uuid: b90a0d97-8c9f-4ab1-8f64-dbb5638159a5\n      attrs:\n        data:\n          help: \"Configuration data\"\n          type: String\n        file_path:\n          help: \"configuration file path\"\n          type: String\n      enabled: true\n      help: \"File\"\n      value: \"\"\n    Platform:\n      attrs:\n        kernel_version:\n          type: String\n        os:\n          type: String\n        os_version:\n          type: String\n      enabled: true\n      help: \"Platform of the Node\"\n      value: nodes/$Node_context.node_id/Platform\n      list: nodes/$Node_context.node_id/Platform\nnamespace.tendrl.node_agent.gluster_integration:\n  flows:\n    ImportCluster:\n      atoms:\n        - tendrl.node_agent.objects.Package.atoms.install\n        - tendrl.node_agent.gluster_integration.objects.Config.atoms.generate\n        - tendrl.node_agent.objects.File.atoms.write\n        - tendrl.node_agent.objects.Node.atoms.cmd\n      help: \"Import existing Gluster Cluster\"\n      enabled: true\n      inputs:\n        mandatory:\n          - \"Node[]\"\n          - TendrlContext.sds_name\n          - TendrlContext.sds_version\n          - TendrlContext.integration_id\n      post_run:\n        - tendrl.node_agent.gluster_integration.objects.TendrlContext.atoms.check_cluster_id_exists\n      pre_run:\n        - tendrl.node_agent.objects.Node.atoms.check_node_up\n        - tendrl.node_agent.objects.TendrlContext.atoms.compare\n      run: tendrl.node_agent.gluster_integration.flows.import_cluster.ImportCluster\n      type: Create\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4edef\n      version: 1\n  objects:\n    TendrlContext:\n      atoms:\n        check_cluster_id_exists:\n          enabled: true\n          name: \"Check cluster id existence\"\n          help: \"Checks if a cluster id exists\"\n          run: tendrl.node_agent.gluster_integration.objects.TendrlContext.atoms.check_cluster_id_exists.CheckClusterIdExists\n          uuid: b90a0d97-8c9f-4ab1-8f64-dbb5638159a4\n      enabled: True\n      attrs:\n        cluster_id:\n          help: \"Tendrl managed/generated cluster id for the sds being managed by Tendrl\"\n          type: String\n        sds_name:\n          help: \"Name of the Tendrl managed sds, eg: 'gluster'\"\n          type: String\n        sds_version:\n          help: \"Version of the Tendrl managed sds, eg: '3.2.1'\"\n          type: String\n      value: clusters/$TendrlContext.integration_id/TendrlContext\n    Config:\n      atoms:\n        generate:\n          enabled: true\n          inputs:\n            mandatory:\n              - Config.etcd_port\n              - Config.etcd_connection\n          name: \"Generate Gluster Integration configuration based on provided inputs\"\n          help: \"Generates configuration content\"\n          outputs:\n            - Config.data\n            - Config.file_path\n          run: tendrl.node_agent.gluster_integration.objects.Config.atoms.generate.Generate\n          uuid: 807a1ead-bd70-4f55-99d0-dbd9d76d2a10\n      attrs:\n        data:\n          help: \"Configuration data of Gluster Integration for this Tendrl deployment\"\n          type: String\n        etcd_connection:\n          help: \"Host/IP of the etcd central store for this Tendrl deployment\"\n          type: String\n        etcd_port:\n          help: \"Port of the etcd central store for this Tendrl deployment\"\n          type: String\n        file_path:\n          default: /etc/tendrl/gluster_integration.conf\n          help: \"Path to the Gluster integration tendrl configuration\"\n          type: String\n      enabled: true\n\nnamespace.tendrl.node_agent.ceph_integration:\n  flows:\n    ImportCluster:\n      atoms:\n        - tendrl.node_agent.objects.Package.atoms.install\n        - tendrl.node_agent.ceph_integration.objects.Config.atoms.generate\n        - tendrl.node_agent.objects.File.atoms.write\n        - tendrl.node_agent.objects.Node.atoms.cmd\n      help: \"Import existing Ceph Cluster\"\n      enabled: true\n      inputs:\n        mandatory:\n          - \"Node[]\"\n          - TendrlContext.sds_name\n          - TendrlContext.sds_version\n          - TendrlContext.integration_id\n      post_run:\n        - tendrl.node_agent.ceph_integration.objects.TendrlContext.atoms.check_cluster_id_exists\n      pre_run:\n        - tendrl.node_agent.objects.Node.atoms.check_node_up\n        - tendrl.node_agent.objects.TendrlContext.atoms.compare\n      run: tendrl.node_agent.ceph_integration.flows.import_cluster.ImportCluster\n      type: Create\n      uuid: 5a48d43b-a163-496c-b01d-9c600ea0a5db\n      version: 1\n  objects:\n    TendrlContext:\n      atoms:\n        check_cluster_id_exists:\n          enabled: true\n          name: \"Check cluster id existence\"\n          help: \"Checks if a cluster id exists\"\n          run: tendrl.node_agent.ceph_integration.objects.TendrlContext.atoms.check_cluster_id_exists.CheckClusterIdExists\n          uuid: b90a0d97-8c9f-4ab1-8f64-dbb5638159a1\n      enabled: True\n      attrs:\n        cluster_id:\n          help: \"Tendrl managed/generated cluster id for the sds being managed by Tendrl\"\n          type: String\n        sds_name:\n          help: \"Name of the Tendrl managed sds, eg: 'ceph'\"\n          type: String\n        sds_version:\n          help: \"Version of the Tendrl managed sds, eg: '2.1'\"\n          type: String\n      value: clusters/$TendrlContext.integration_id/TendrlContext\n    Config:\n      atoms:\n        generate:\n          enabled: true\n          inputs:\n            mandatory:\n              - Config.etcd_port\n              - Config.etcd_connection\n          name: \"Generate Ceph Integration configuration based on provided inputs\"\n          help: \"Generates configuration content\"\n          outputs:\n            - Config.data\n            - Config.file_path\n          run: tendrl.node_agent.ceph_integration.objects.Config.atoms.generate.Generate\n          uuid: 61959242-628f-4847-a5e2-2c8d8daac0cd\n      attrs:\n        data:\n          help: \"Configuration data of Ceph Integration for this Tendrl deployment\"\n          type: String\n        etcd_connection:\n          help: \"Host/IP of the etcd central store for this Tendrl deployment\"\n          type: String\n        etcd_port:\n          help: \"Port of the etcd central store for this Tendrl deployment\"\n          type: String\n        file_path:\n          default: /etc/tendrl/ceph_integration.conf\n          help: \"Path to the Ceph integration tendrl configuration\"\n          type: String\n      enabled: true\n\ntendrl_schema_version: 0.3\n",
		"modifiedIndex": 9729,
		"createdIndex": 9729
	}
}
