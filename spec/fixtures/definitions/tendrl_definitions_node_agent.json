{"action":"get","node":{"key":"/_NS/node_agent/compiled_definitions/data","value":"namespace.integrations.ceph:\n  flows:\n    AddOsds:\n      enabled: true\n      help: Expands a cluster with osds\n      inputs:\n        mandatory:\n        - TendrlContext.integration_id\n        - TendrlContext.cluster_id\n        - TendrlContext.cluster_name\n        - Cluster.public_network\n        - Cluster.cluster_network\n        - Cluster.node_configuration\n      run: integrations.ceph.flows.AddOsds\n      tags:\n      - provisioner/$TendrlContext.sds_name\n      type: Create\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4edcd\n      version: 1\nnamespace.node_agent:\n  flows:\n    GenerateJournalMapping:\n      enabled: true\n      help: Generate journal mapping\n      inputs:\n        mandatory:\n        - Cluster.node_configuration\n        optional:\n        - TendrlContext.integration_id\n      run: node_agent.flows.GenerateJournalMapping\n      tags:\n      - tendrl/monitor\n      type: Create\n      uuid: 3f94a48a-05d7-408c-b400-e27827f4eacc\n      version: 1\n  objects:\n    GlobalNetwork:\n      attrs:\n        device_link:\n          help: device link\n          type: String\n        driver:\n          help: driver\n          type: String\n        driver_modules:\n          help: driver modules\n          type: String\n        hw_address:\n          help: hardware address\n          type: String\n        interface:\n          help: network interface name\n          type: List\n        interface_id:\n          help: unique id\n          type: String\n        interface_type:\n          help: interface type\n          type: String\n        ipv4:\n          help: ipv4 addresses\n          type: List\n        ipv6:\n          help: ipv6 addresses\n          type: List\n        link_detected:\n          help: link detected\n          type: String\n        model:\n          help: interface model\n          type: String\n        netmask:\n          help: subnet masks\n          type: List\n        status:\n          help: interface status up/down\n          type: String\n        subnet:\n          help: subnet\n          type: String\n        sysfs_id:\n          help: sysfs id\n          type: String\n      enabled: true\n      help: Global subnet wise network interface\n      list: nodes/$NodeContext.node.id/Networks\n      value: /networks\nnamespace.tendrl:\n  ceph_provisioner: CephInstallerPlugin\n  flows:\n    CreateCluster:\n      enabled: true\n      help: Create a cluster from scratch\n      inputs:\n        mandatory:\n        - Node[]\n        - TendrlContext.cluster_name\n        - TendrlContext.sds_name\n        - TendrlContext.cluster_id\n        - Cluster.public_network\n        - Cluster.cluster_network\n        - TendrlContext.integration_id\n        - Cluster.node_configuration\n        - Cluster.conf_overrides\n      pre_run:\n      - tendrl.objects.Node.atoms.IsNodeTendrlManaged\n      run: tendrl.flows.CreateCluster\n      tags:\n      - provisioner/$TendrlContext.sds_name\n      type: Create\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4eacd\n      version: 1\n    ExpandCluster:\n      enabled: true\n      help: expanding an existing cluster\n      inputs:\n        mandatory:\n        - Node[]\n        - TendrlContext.integration_id\n        - TendrlContext.cluster_id\n        - TendrlContext.cluster_name\n        - TendrlContext.sds_name\n        - Cluster.cluster_network\n        - Cluster.node_identifier\n        - Cluster.node_configuration\n      run: tendrl.flows.ExpandCluster\n      tags:\n      - provisioner/$TendrlContext.integration_id\n      type: Update\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4eacd\n      version: 1\n    ImportCluster:\n      enabled: true\n      help: Import existing Gluster Cluster\n      inputs:\n        mandatory:\n        - Node[]\n        - DetectedCluster.sds_pkg_name\n        - TendrlContext.integration_id\n      pre_run:\n      - tendrl.objects.Node.atoms.IsNodeTendrlManaged\n      run: tendrl.flows.ImportCluster\n      tags:\n      - detected_cluster/$DetectedCluster.detected_cluster_id\n      type: Create\n      uuid: 2f94a48a-05d7-408c-b400-e27827f4edef\n      version: 1\n  gluster_provisioner: GdeployPlugin\n  min_reqd_ceph_ver: 10.2.5\n  min_reqd_gluster_ver: 3.9.0\n  objects:\n    BlockDevice:\n      attrs:\n        alignment:\n          help: alignment offset\n          type: String\n        device_kernel_name:\n          help: block device kernel name\n          type: String\n        device_name:\n          help: block device name\n          type: String\n        device_type:\n          help: device type\n          type: String\n        discard_align_offset:\n          help: discard alignment offset\n          type: String\n        discard_granularity:\n          help: discard granularity\n          type: String\n        discard_max_bytes:\n          help: discard max bytes\n          type: String\n        discard_zeros_data:\n          help: discard zeroes data\n          type: String\n        disk_id:\n          help: disk id of block device\n          type: String\n        fstype:\n          help: filesystem type\n          type: String\n        fsuuid:\n          help: filesystem UUID\n          type: String\n        group:\n          help: group name\n          type: String\n        label:\n          help: filesystem LABEL\n          type: String\n        log_sector_size:\n          help: logical sector size\n          type: String\n        major_to_minor_no:\n          help: major:minor device number\n          type: String\n        min_io_size:\n          help: minimum I/O size\n          type: String\n        mode:\n          help: device node permissions\n          type: String\n        mount_point:\n          help: where the device is mounted\n          type: String\n        optimal_io_size:\n          help: optimal I/O size\n          type: String\n        owner:\n          help: user name\n          type: String\n        parent_name:\n          help: block device parent name\n          type: String\n        phy_sector_size:\n          help: physical sector size\n          type: String\n        read_ahead:\n          help: read-ahead of the device\n          type: String\n        read_only:\n          help: read-only device\n          type: String\n        removable_device:\n          help: removable device\n          type: String\n        req_queue_size:\n          help: request queue size\n          type: String\n        rotational:\n          help: device rotational flag\n          type: String\n        scheduler_name:\n          help: I/O scheduler name\n          type: String\n        size:\n          help: size of the device\n          type: String\n        ssd:\n          help: device is ssd or not\n          type: Boolean\n        state:\n          help: state of the device\n          type: String\n        used:\n          help: device is free or used\n          type: Boolean\n      enabled: true\n      help: BlockDevice\n      list: nodes/$NodeContext.node_id/LocalStorage/BlockDevice\n      value: nodes/$NodeContext.node_id/LocalStorage/BlockDevice\n    Cluster:\n      attrs:\n        cluster_network:\n          help: Data Nework cidr of the cluster\n        conf_overrides:\n          help: Configuration overrides for the cluster\n          type: Dict\n        node_configuration:\n          help: Node configuration for the cluster nodes\n          type: Dict[]\n        node_identifier:\n          help: How nodes should be identified while create cluster\n          type: String\n        public_network:\n          help: Public Network cidr of the cluster\n          type: String\n      enabled: true\n      help: Represents a cluster\n      internal: true\n      list: /clusters\n    ClusterNodeContext:\n      attrs:\n        fqdn:\n          help: FQDN of the Tendrl managed node\n          type: String\n        machine_id:\n          help: Unique /etc/machine-id\n          type: String\n        node_id:\n          help: Tendrl ID for the managed node\n          type: String\n        status:\n          help: Node status\n          type: String\n        tags:\n          help: The tags associated with this node\n          type: List\n      enabled: true\n      help: Cluster leval Node Context\n      list: clusters/$TendrlContext.integration_id/nodes/$NodeContext.node_id/NodeContext\n      value: clusters/$TendrlContext.integration_id/nodes/$NodeContext.node_id/NodeContext\n    ClusterTendrlContext:\n      attrs:\n        cluster_id:\n          help: FSID (Ceph) or Gluster specific ID\n          type: String\n        cluster_name:\n          help: Name of the cluster\n          type: String\n        integration_id:\n          help: Tendrl managed/generated cluster id for the sds being managed by Tendrl\n          type: String\n        node_id:\n          help: Tendrl ID for the managed node\n          type: String\n        sds_name:\n          help: 'Name of the Tendrl managed sds, eg: ''gluster'''\n          type: String\n        sds_version:\n          help: 'Version of the Tendrl managed sds, eg: ''3.2.1'''\n          type: String\n      enabled: true\n      help: Tendrl context\n      value: clusters/$TendrlContext.integration_id/TendrlContext\n    Cpu:\n      attrs:\n        architecture:\n          type: String\n        cores_per_socket:\n          type: String\n        cpu_family:\n          type: String\n        cpu_op_mode:\n          type: String\n        model:\n          type: String\n        model_name:\n          type: String\n        vendor_id:\n          type: String\n      enabled: true\n      help: CPU\n      value: nodes/$NodeContext.node_id/Cpu\n    DetectedCluster:\n      attrs:\n        detected_cluster_id:\n          help: Temporary id for the sds which is detected in Tendrl\n          type: String\n        detected_cluster_name:\n          help: Name of the sds which is detected in Tendrl\n          type: String\n        sds_pkg_name:\n          help: Storage system package name\n          type: String\n        sds_pkg_version:\n          help: Storage system package version\n          type: String\n      enabled: true\n      help: DetectedCluster\n      list: nodes/$NodeContext.node_id/DetectedCluster\n      value: nodes/$NodeContext.node_id/DetectedCluster\n    Disk:\n      attrs:\n        bios_id:\n          help: Bios id\n          type: String\n        config_status:\n          help: configuration status\n          type: String\n        device:\n          help: device\n          type: String\n        device_files:\n          help: device files\n          type: String\n        device_number:\n          help: device number\n          type: String\n        disk_id:\n          help: disk unique id\n          type: String\n        disk_name:\n          help: disk name\n          type: String\n        driver:\n          help: driver\n          type: String\n        driver_modules:\n          help: driver modules\n          type: String\n        geo_bios_edd:\n          help: geometry bios edd\n          type: String\n        geo_bios_legacy:\n          help: geometry bios legacy\n          type: String\n        geo_logical:\n          help: geometry logical\n          type: String\n        hardware_class:\n          help: type\n          type: String\n        hardware_id:\n          help: hwinfo id\n          type: String\n        model:\n          help: interface model\n          type: String\n        partitions:\n          help: partitions details\n          type: json\n        rmversion:\n          help: disk firmeware version\n          type: String\n        serial_no:\n          help: disk serial number\n          type: String\n        size:\n          help: size of the disk\n          type: String\n        size_bios_edd:\n          help: size of bios edd\n          type: String\n        sysfs_busid:\n          help: sysfs bus id\n          type: String\n        sysfs_device_link:\n          help: sysfs device link\n          type: String\n        sysfs_id:\n          help: sysfs id\n          type: String\n        vendor:\n          help: disk vendor name\n          type: String\n      enabled: true\n      help: Disk\n      list: nodes/$NodeContext.node_id/LocalStorage/Disks\n      value: nodes/$NodeContext.node_id/LocalStorage/Disks\n    Job:\n      attrs:\n        children:\n          help: ID of child jobs created by this job\n          type: List\n        errors:\n          help: any errors occured or not\n          type: String\n        job_id:\n          help: job unique id\n          type: String\n        output:\n          help: output of the job execution\n          type: dict\n        payload:\n          help: json\n          type: Json\n        status:\n          help: job current status\n          type: String\n      enabled: true\n      help: jobs\n      list: /queue\n      value: /queue\n    Memory:\n      attrs:\n        total_size:\n          type: String\n        total_swap:\n          type: String\n      enabled: true\n      help: Node Memory\n      value: nodes/$NodeContext.node_id/Memory\n    Node:\n      atoms:\n        CheckNodeUp:\n          enabled: true\n          help: Checks if a node is up\n          inputs:\n            mandatory:\n            - Node.fqdn\n          name: check whether the node is up\n          outputs:\n          - Node.status\n          run: tendrl.objects.Node.atoms.CheckNodeUp\n          type: Create\n          uuid: eda0b13a-7362-48d5-b5ca-4b6d6533a5ab\n        Cmd:\n          enabled: true\n          help: Executes a command\n          inputs:\n            mandatory:\n            - Node.cmd_str\n          name: Execute CMD on Node\n          outputs:\n          - Node.status\n          run: tendrl.objects.Node.atoms.Cmd\n          type: Create\n          uuid: dc8fff3a-34d9-4786-9282-55eff6abb6c3\n        IsNodeTendrlManaged:\n          enabled: true\n          help: Check if a node is being managed by tendrl\n          inputs:\n            mandatory:\n            - Node[]\n          run: tendrl.objects.Node.atoms.IsNodeTendrlManaged\n          type: check\n          uuid: 2f94a48a-05d7-408c-b400-e27827f4edca\n          version: 1\n      attrs:\n        cmd_str:\n          type: String\n        fqdn:\n          type: String\n        status:\n          type: Boolean\n      enabled: true\n      help: Node\n      list: nodes/\n      value: nodes/$NodeContext.node_id/Node\n    NodeContext:\n      attrs:\n        fqdn:\n          help: FQDN of the Tendrl managed node\n          type: String\n        machine_id:\n          help: Unique /etc/machine-id\n          type: String\n        node_id:\n          help: Tendrl ID for the managed node\n          type: String\n        status:\n          help: Node status\n          type: String\n        tags:\n          help: The tags associated with this node\n          type: List\n      enabled: true\n      help: Node Context\n      list: nodes/$NodeContext.node_id/NodeContext\n      value: nodes/$NodeContext.node_id/NodeContext\n    NodeNetwork:\n      attrs:\n        device_link:\n          help: device link\n          type: String\n        driver:\n          help: driver\n          type: String\n        driver_modules:\n          help: driver modules\n          type: String\n        hw_address:\n          help: hardware address\n          type: String\n        interface:\n          help: network interface name\n          type: List\n        interface_id:\n          help: unique id\n          type: String\n        interface_type:\n          help: interface type\n          type: String\n        ipv4:\n          help: ipv4 addresses\n          type: List\n        ipv6:\n          help: ipv6 addresses\n          type: List\n        link_detected:\n          help: link detected\n          type: String\n        model:\n          help: interface model\n          type: String\n        netmask:\n          help: subnet masks\n          type: List\n        status:\n          help: interface status up/down\n          type: String\n        subnet:\n          help: subnet\n          type: String\n        sysfs_id:\n          help: sysfs id\n          type: String\n      enabled: true\n      help: Node wise network interface\n      list: nodes/$NodeContext.node_id/Networks\n      value: nodes/$NodeContext.node_id/Networks\n    Os:\n      attrs:\n        kernel_version:\n          type: String\n        os:\n          type: String\n        os_version:\n          type: String\n        selinux_mode:\n          type: String\n      enabled: true\n      help: OS\n      value: nodes/$NodeContext.node_id/Os\n    Platform:\n      attrs:\n        kernel_version:\n          type: String\n        os:\n          type: String\n        os_version:\n          type: String\n      enabled: true\n      help: Platform of the Node\n      list: nodes/$NodeContext.node_id/Platform\n      value: nodes/$NodeContext.node_id/Platform\n    Service:\n      atoms:\n        CheckServiceStatus:\n          enabled: true\n          help: check whether the service is running\n          inputs:\n            mandatory:\n            - Node.fqdn\n            - Service.name\n          name: check whether the service is running\n          outputs:\n          - status\n          run: tendrl.objects.Service.atoms.CheckServiceStatus\n          type: Create\n          uuid: eda0b13a-7362-48d5-b5ca-4b6d6533a5ab\n      attrs:\n        exists:\n          type: String\n        running:\n          type: String\n        service:\n          type: String\n      enabled: true\n      help: Service\n      list: nodes/$NodeContext.node_id/Services\n      value: nodes/$NodeContext.node_id/Services\n    TendrlContext:\n      attrs:\n        cluster_id:\n          help: UUID of the cluster\n          type: String\n        cluster_name:\n          help: Name of the cluster\n          type: String\n        integration_id:\n          help: Tendrl managed/generated cluster id for the sds being managed by Tendrl\n          type: String\n        node_id:\n          help: Tendrl ID for the managed node\n          type: String\n        sds_name:\n          help: 'Name of the Tendrl managed sds, eg: ''gluster'''\n          type: String\n        sds_version:\n          help: 'Version of the Tendrl managed sds, eg: ''3.2.1'''\n          type: String\n      enabled: true\n      help: Tendrl context\n      value: nodes/$NodeContext.node_id/TendrlContext\n    VirtualDisk:\n      attrs:\n        bios_id:\n          help: Bios id\n          type: String\n        config_status:\n          help: configuration status\n          type: String\n        device:\n          help: device\n          type: String\n        device_files:\n          help: device files\n          type: String\n        device_number:\n          help: device number\n          type: String\n        disk_id:\n          help: disk unique id\n          type: String\n        disk_name:\n          help: disk name\n          type: String\n        driver:\n          help: driver\n          type: String\n        driver_modules:\n          help: driver modules\n          type: String\n        geo_bios_edd:\n          help: geometry bios edd\n          type: String\n        geo_bios_legacy:\n          help: geometry bios legacy\n          type: String\n        geo_logical:\n          help: geometry logical\n          type: String\n        hardware_class:\n          help: type\n          type: String\n        hardware_id:\n          help: hwinfo id\n          type: String\n        model:\n          help: interface model\n          type: String\n        partitions:\n          help: partitions details\n          type: json\n        rmversion:\n          help: disk firmeware version\n          type: String\n        serial_no:\n          help: disk serial number\n          type: String\n        size:\n          help: size of the disk\n          type: String\n        size_bios_edd:\n          help: size of bios edd\n          type: String\n        sysfs_busid:\n          help: sysfs bus id\n          type: String\n        sysfs_device_link:\n          help: sysfs device link\n          type: String\n        sysfs_id:\n          help: sysfs id\n          type: String\n        vendor:\n          help: disk vendor name\n          type: String\n      enabled: true\n      help: VirtualDisk\n      list: nodes/$NodeContext.node_id/LocalStorage/Virtio\n      value: nodes/$NodeContext.node_id/LocalStorage/Virtio\n  supported_sds:\n  - ceph\n  - gluster\n  tags:\n    ceph-installer: provisioner/ceph\n    ceph-mon: ceph/mon\n    ceph-osd: ceph/osd\n    ceph-provisioner: provisioner/ceph\n    etcd: tendrl/central-store\n    gluster-provisioner: provisioner/gluster\n    glusterd: gluster/server\n    tendrl-api: tendrl/server\n    tendrl-ceph-integration: tendrl/integration/ceph\n    tendrl-gluster-integration: tendrl/integration/gluster\n    tendrl-monitor: tendrl/monitor\n    tendrl-node-agent: tendrl/node\ntendrl_schema_version: 0.3\n","modifiedIndex":6221697,"createdIndex":6221697}}
